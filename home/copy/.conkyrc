package.path = './.conky/?.lua;' .. package.path
require('lib')

conky.config = {
	alignment = 'middle_right',
	background = false,
	border_width = 0,
	border_inner_margin = dip(8),
	cpu_avg_samples = 2,
	default_color = 'white',
	default_outline_color = 'white',
	default_shade_color = 'white',
	double_buffer = true,
	draw_borders = false,
	draw_graph_borders = true,
	draw_outline = false,
	draw_shades = false,
	extra_newline = false,
	font = 'DejaVu Sans Mono:size=12',
	gap_x = dip(16),
	gap_y = dip(16),
	lua_load = '~/.conky/main.lua ~/.conky/iops.lua',
	lua_draw_hook_post = 'draw',
	lua_draw_hook_pre = 'iops_query',
	minimum_height = dip(5),
	minimum_width = dip(5),
	net_avg_samples = 2,
	no_buffers = true,
	out_to_console = false,
	out_to_ncurses = false,
	out_to_stderr = false,
	out_to_x = true,
	own_window = true,
	own_window_class = 'Conky',
	own_window_type = 'desktop',
	show_graph_range = false,
	show_graph_scale = false,
	stippled_borders = 0,
	update_interval = 1.0,
	uppercase = false,
	use_spacer = 'none',
	use_xft = true,
	xinerama_head = 2,
}

conky.text = [[
${color 0080ff}CPU${color}

${alignc}${exec sensors | grep -oE '^(Package|Tdie).*\(' | grep -oE '[0-9]+\.[0-9]Â°C'}
${cpugraph cpu0 64,700 0080ff ff0000 -t}
${voffset ]] .. dip(68) .. [[}

 PID  Process $alignr   Mem     CPU
$hr
${top pid 1} ${top name 1}$alignr${top mem_res 1}${top cpu 1}%
${top pid 2} ${top name 2}$alignr${top mem_res 2}${top cpu 2}%
${top pid 3} ${top name 3}$alignr${top mem_res 3}${top cpu 3}%
${top pid 4} ${top name 4}$alignr${top mem_res 4}${top cpu 4}%
${top pid 5} ${top name 5}$alignr${top mem_res 5}${top cpu 5}%

${color 0080ff}MEMORY${color}

RAM $alignc $mem / $memmax $alignr $memperc%
${memgraph cpu0 64,700 0080ff 0080ff}
swap $alignc ${swap} / ${swapmax} $alignr ${swapperc}%
${swapbar}

 PID  Process $alignr   Mem     CPU
$hr
${top_mem pid 1} ${top_mem name 1}$alignr${top_mem mem_res 1}${top_mem cpu 1}%
${top_mem pid 2} ${top_mem name 2}$alignr${top_mem mem_res 2}${top_mem cpu 2}%
${top_mem pid 3} ${top_mem name 3}$alignr${top_mem mem_res 3}${top_mem cpu 3}%
${top_mem pid 4} ${top_mem name 4}$alignr${top_mem mem_res 4}${top_mem cpu 4}%
${top_mem pid 5} ${top_mem name 5}$alignr${top_mem mem_res 5}${top_mem cpu 5}%

${color 0080ff}FILESYSTEM${color}

/ $alignc ${fs_used /} / ${fs_size /} $alignr ${fs_used_perc /}%
${color 0080ff}${fs_bar /}${color}
${voffset -38}${color gray}${execbar echo 0}${color}
Read  $alignc ${diskio_read}/s $alignr ${lua iops_read sda} IO/s
Write $alignc ${diskio_write}/s $alignr ${lua iops_write sda} IO/s

dubrowgn $alignc ${fs_used /mnt/dubrowgn} / ${fs_size /mnt/dubrowgn} $alignr ${fs_used_perc /mnt/dubrowgn}%
${color 0080ff}${fs_bar /mnt/dubrowgn}${color}
${voffset -38}${color gray}${execbar echo 0}${color}

public $alignc ${fs_used /mnt/public} / ${fs_size /mnt/public} $alignr ${fs_used_perc /mnt/public}%
${color 0080ff}${fs_bar /mnt/public}${color}
${voffset -38}${color gray}${execbar echo 0}${color}

${color 0080ff}NETWORK${color}

Interface ${alignc -10} Down ${alignr} Up
eno1 ${alignc -20} ${downspeed eno1}/s ${alignr} ${upspeed eno1}/s
${voffset -168}
]]
